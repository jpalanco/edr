<div class="padded" grr-force-refresh refresh-trigger="flowId">

  <div ng-if="!flowId">
    Please select a flow to see its details here.
  </div>

  <uib-tabset ng-if="flowId" active="controller.activeTab">
    <uib-tab heading="Flow Information" index="''">
      <grr-flow-overview flow="controller.flow"
                         flow-id="flowId" api-base-path="apiBasePath"
                         ng-if="controller.tabsShown['']" />
    </uib-tab>

    <uib-tab heading="Download" index="'download'">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Download</h4>

          <p class="card-text">
            Click the link below to download the flow as a zip file.
          </p>
          <button class="btn btn-default"
                  ng-click="controller.downloadFile()">
            Download
          </button>
        </div>
      </div>
    </uib-tab>

    <uib-tab heading="Requests" index="'requests'">
      <grr-flow-requests
        flow="controller.flow"
        flow-id="flowId" api-base-path="apiBasePath"
        ng-if="controller.tabsShown['requests']" />
    </uib-tab>

    <uib-tab heading="Results" index="'results'">
      <grr-flow-results
        artifact-names="controller.flow.context.artifacts || controller.flow.runner_args.args.artifacts.names"
        client-id="controller.flow.runner_args.client_id"
        flow-id="flowId"
        ng-if="controller.tabsShown['results']" />
    </uib-tab>

    <uib-tab heading="Log" index="'log'">
      <grr-flow-log
        flow="controller.flow"
        client-id="controller.flow.runner_args.client_id"
        flow-id="flowId" api-base-path="apiBasePath"
        ng-if="controller.tabsShown['log']" />
    </uib-tab>

  </uib-tabset>

</div>
